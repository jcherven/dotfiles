set -g default-terminal "xterm-screen-256color"
# tell Tmux that outside terminal supports true color
set -as terminal-overrides ",*:Tc"

# Change prefix to ctrl-a instead of ctrl-b
set-option -g prefix C-space
unbind C-b
bind-key C-space send-prefix

# .tmux.conf configuration reload with prefix-R
bind-key R source-file ~/.tmux.conf \; display-message "tmux.conf reloaded"

# In Neovim, fixes the delay when exiting edit mode
# https://github.com/neovim/neovim/issues/2035
set -sg escape-time 5

# set first index 1 instead of 0 for windows and panes
set -g base-index 1
set -g pane-base-index 1

# Enable mouse control for windows and panes
set -g mouse on

# vi mode for keys
setw -g mode-keys vi

# Pane movement with hjkl like vi
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# smart pane switching with awareness of vim splits (with hjkl)
# requires the vim plugin 'christoomey/vim-tmux-navigator'
# bind -n C-h run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-h) || tmux select-pane -L"
# bind -n C-j run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-j) || tmux select-pane -D"
# bind -n C-k run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-k) || tmux select-pane -U"
# bind -n C-l run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-l) || tmux select-pane -R"
# bind -n C-\ run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys 'C-\\') || tmux select-pane -l"

# Pane resizing
# bind -n M-h resize-pane -L 5
# bind -n M-j resize-pane -D 5
# bind -n M-k resize-pane -U 5
# bind -n M-l resize-pane -R 5

# MacOS fix for pbcopy, pbpaste, and launchctl
# Requires ~/dotfiles/bash_scripts/safe-reattach-to-user-namespace.sh in $PATH
# set -g default-shell "$SHELL"
# set-option -g default-command "safe-reattach-to-user-namespace -l $SHELL"

# Pane styling
# set -g pane-border-style 'fg=colour239'
# set -ag pane-active-border-style 'fg=colour165'

# Status Bar colors
# set -g status-style 'bg=colour239 fg=colour254'
# Active window tab color, background
# setw -g window-status-current-style 'bg=colour30'

